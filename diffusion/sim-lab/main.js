!function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=9)}([,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();t.PopupMatchingQuestion=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainLab=t,this.questionXml=$(this.mainLab.stepXml).find("popup-questions"),this.btnTryAgain=$("#sim-question #btn-tryagain"),this.btnContinue=$("#sim-question #btn-continue"),this.btnSubmit=$("#sim-question #btn-submit"),this.btnClose=$("#sim-question .close"),this.questionDialog=$("#sim-question"),this.quetionID=null,this.qType="checkbox",this.isShowing=!1;void 0===t.userValues.popups&&(t.userValues.popups=[])}return a(e,[{key:"showQuestion",value:function(e){this.questionID=e;var t=this.questionXml.find('question[id="'+e+'"]'),i='<fieldset class="matching-question"><legend>'+t.attr("q")+"</legend>\n",a=[];if(void 0===t.attr("type")||"matching"!==t.attr("type"))throw"Wrong question type";t.find("choice").each(function(){a.push($(this))});for(var s=0;s<a.length;s++){var n=a[s],o=n.attr("id");i=(i=i+'<div><label id="lpq'+o+'" aria-hidden="true">'+n.find("text").html()+"</label>\n")+'<select id="pq'+o+'" aria-labelledby="lpq'+o+'" class="popupq" tabindex="0">\n<option value="0">Choose match</option></select>',i+="</div>\n"}i+="</fieldset>\n";var r=$(i),l=t.find("match");r.find("select").each(function(e,t){l.each(function(e,i){$(t).append($("<option/>").text($(i).text()).attr("value",$(i).parent().attr("id")))})});for(var u=0;u<a.length;u++)$(r).append($(">div",r).eq(Math.floor(Math.random()*a.length)));i=r[0].outerHTML,$("#sim-question .modal-body").html(i),$("#sim-question .modal-footer .feedback p").html(""),$(".popupq").change(function(e){var t=$(this).val();console.log("is keyboard user: "+c.mainLab.keyboardUser),$(".popupq").not($(this)).each(function(){$(this).val()!==t||c.mainLab.keyboardUser||$(this).val("0")})}),this.btnTryAgain.hide(),this.btnContinue.hide(),this.btnSubmit.show(),this.btnClose.hide(),this.questionDialog.modal("show"),this.isShowing=!0,this.btnSubmit.off("click"),this.btnSubmit.on("click",{popupClass:this},this.popupAnswered),this.btnTryAgain.off("click"),this.btnTryAgain.click(function(){$(".popupq").prop("checked",!1),$(".popupq").removeAttr("disabled"),"checkbox"===c.qType?$(".popupq").attr("tabindex","0"):($(".popupq").attr("tabindex","-1"),$(".popupq").first().attr("tabindex","0")),$("#sim-question .modal-footer .feedback p").html(""),c.btnTryAgain.hide(),c.btnContinue.hide(),c.btnClose.hide(),c.btnSubmit.show(),$("#sim-question").find(":tabbable").first().focus()});var c=this,d=$.grep(this.mainLab.userValues.popups,function(e){return e.id===c.questionID});0===d.length?(this.userPopupData={},this.userPopupData.id=e,this.userPopupData.errors=0,this.mainLab.userValues.popups.push(this.userPopupData),this.mainLab.updateUserValues()):this.userPopupData=d[0]}},{key:"popupAnswered",value:function(e){var t="",i="",a=[],s=e.data.popupClass;s.questionDialog.find("select").each(function(e,t){var s=$(t).attr("id").replace("pq","")===$(t).val();a.push(s),i=i+"<div>"+$(t).prev().text()+": "+(s?"Correct":"Incorrect")+"</div>"}),$(".popupq").attr("disabled","true"),$(".popupq").attr("tabindex","-1"),-1!==a.indexOf(!1)?(s.btnContinue.hide(),s.btnClose.hide(),s.btnTryAgain.show(),s.btnTryAgain.focus(),void 0===s.mainLab.userValues.completed&&(s.userPopupData.errors=s.userPopupData.errors+1,s.mainLab.updateUserValues()),t='<span class="h4">Incorrect<span style="opacity:0">:</span></span>',-1!==a.indexOf(!0)&&(t='<span class="h4">Partially correct<span style="opacity:0">:</span></span>'),t+=i):(s.btnClose.show(),s.btnTryAgain.hide(),s.btnContinue.show(),t='<span class="h4">Correct<span style="opacity:0">:</span></span>'),s.btnSubmit.hide(),$("#sim-question .modal-footer .feedback p").html(t),$("#sim-question .modal-footer").show()}},{key:"onHide",value:function(e){this.isShowing=!1,this.mainLab.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("popupClosed",{bubbles:!0,detail:{question:this.questionID}}))}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();t.PopupQuestion=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mainLab=t,this.questionXml=$(this.mainLab.stepXml).find("popup-questions"),this.btnTryAgain=$("#sim-question #btn-tryagain"),this.btnContinue=$("#sim-question #btn-continue"),this.btnSubmit=$("#sim-question #btn-submit"),this.btnClose=$("#sim-question .close"),this.questionDialog=$("#sim-question"),this.quetionID=null,this.qType="radio",this.isShowing=!1,void 0===t.userValues.popups&&(t.userValues.popups=[])}return a(e,[{key:"showQuestion",value:function(e){this.questionID=e;var t=this.questionXml.find('question[id="'+e+'"]'),i="<fieldset><legend>"+t.attr("q")+"</legend>\n",a=[],s=t.attr("correct");this.qType="radio";var n=this;-1!==s.indexOf(",")&&(this.qType="checkbox"),t.find("choice").each(function(){a.push($(this))});for(var o=0;o<a.length;o++){var r=a[o],l=r.attr("id"),u=void 0===r.find("feedback").attr("image")?"":r.find("feedback").attr("image"),c=void 0===r.find("feedback").attr("aria-label")?"":r.find("feedback").attr("aria-label");i=(i=i+'<div><input id="pq'+l+'" aria-labelledby="lpq'+l+'" class="popupq" value="'+l+'" type="'+this.qType+'" name="popupq" data-feedback="'+r.find("feedback").html()+'" data-feedback-image="'+u+'" data-feedback-image-label="'+c+'" tabindex="-1" />\n')+'<label id="lpq'+l+'" class="checkmark" aria-hidden="true">'+r.find("text").html()+"</span>\n",i+="</div>\n"}i+="</fieldset>\n";for(var d=$(i),h=0;h<a.length;h++)$(d).append($(">div",d).eq(Math.floor(Math.random()*a.length)));if("checkbox"===this.qType?$(d).find("input").attr("tabindex","0"):$(d).find("input").first().attr("tabindex",0),"checkbox"===this.qType){var b=["A.","B.","C.","D.","E.","F.","G."];$("div",d).each(function(e){$(this).attr("data-label",b[e]),$("label",$(this)).html("<span>"+b[e]+"</span> "+$("label",$(this)).html())})}i=d[0].outerHTML,$("#sim-question .modal-body").html(i),$("#sim-question .modal-footer .feedback p").html(""),$(".popupq").focus(function(){$(this).parent().addClass("focus-border")}),$(".popupq").focusout(function(){$(this).parent().removeClass("focus-border")}),$(".popupq").change(function(){"checkbox"!==n.qType?($(".popupq").attr("tabindex","-1"),$(this).is(":checked")&&$(this).attr("tabindex",0),n.btnSubmit.is("[disabled]")&&(n.btnSubmit.removeAttr("disabled"),n.btnSubmit.attr("tabindex",0),n.btnSubmit.removeAttr("aria-disabled"),n.btnSubmit.attr("focusable","true"))):$(".popupq:checked").length>0?n.btnSubmit.is("[disabled]")&&(n.btnSubmit.removeAttr("disabled"),n.btnSubmit.attr("tabindex",0),n.btnSubmit.removeAttr("aria-disabled"),n.btnSubmit.attr("focusable","true")):(n.btnSubmit.attr("disabled","true"),n.btnSubmit.attr("tabindex","-1"),n.btnSubmit.attr("aria-disabled","true"),n.btnSubmit.attr("focusable","false"))}),this.btnTryAgain.hide(),this.btnContinue.hide(),this.btnSubmit.show(),this.btnSubmit.attr("disabled","true"),this.btnSubmit.attr("tabindex","-1"),this.btnSubmit.attr("aria-disabled","true"),this.btnSubmit.attr("focusable","false"),this.btnClose.hide(),this.questionDialog.modal("show"),this.isShowing=!0,this.btnSubmit.off("click"),this.btnSubmit.on("click",{popupClass:this,correct:s},this.popupAnswered),this.btnTryAgain.off("click"),this.btnTryAgain.click(function(){$(".popupq").prop("checked",!1),$(".popupq").removeAttr("disabled"),"checkbox"===n.qType?$(".popupq").attr("tabindex","0"):($(".popupq").attr("tabindex","-1"),$(".popupq").first().attr("tabindex","0")),$("#sim-question .modal-footer .feedback p").html(""),n.btnTryAgain.hide(),n.btnContinue.hide(),n.btnClose.hide(),n.btnSubmit.show(),n.btnSubmit.attr("disabled","true"),n.btnSubmit.attr("tabindex","-1"),n.btnSubmit.attr("aria-disabled","true"),n.btnSubmit.attr("focusable","false"),$("#sim-question").find(":tabbable").first().focus()});var p=$.grep(this.mainLab.userValues.popups,function(e){return e.id===n.questionID});0===p.length?(this.userPopupData={},this.userPopupData.id=e,this.userPopupData.errors=0,this.mainLab.userValues.popups.push(this.userPopupData),this.mainLab.updateUserValues()):this.userPopupData=p[0]}},{key:"popupAnswered",value:function(e){var t=$('input[name="popupq"]:checked');if(t.length>0){var i="",a=e.data.correct.split(",");""===a[1]&&a.pop();var s=!0,n=!1;a.length===t.length?$.each(a,function(e,i){-1===t.map(function(){return $(this).val()}).get().indexOf(i)?s=!1:n=!0}):(s=!1,$.each(a,function(e,i){-1!==t.map(function(){return $(this).val()}).get().indexOf(i)&&(n=!0)}));var o=e.data.popupClass;$(".popupq").attr("disabled","true"),$(".popupq").attr("tabindex","-1"),!1===s?(o.btnContinue.hide(),o.btnClose.hide(),o.btnTryAgain.show(),o.btnTryAgain.focus(),void 0===o.mainLab.userValues.completed&&(o.userPopupData.errors=o.userPopupData.errors+1,o.mainLab.updateUserValues()),"checkbox"===o.qType&&(i='<span class="h4">Incorrect<span style="opacity:0">:</span></span>',!0===n&&(i='<span class="h4">Partially correct<span style="opacity:0">:</span></span>'))):(o.btnClose.show(),o.btnTryAgain.hide(),o.btnContinue.show(),"checkbox"===o.qType&&(i='<span class="h4">Correct<span style="opacity:0">:</span></span>')),o.btnSubmit.hide(),$('input[name="popupq"]:checked').each(function(){var e='aria-hidden="true"';""!==$(this).attr("data-feedback-image-label")&&(e='aria-label="'+$(this).attr("data-feedback-image-label")+'"');var t=""===$(this).attr("data-feedback-image")?"":'<br /><img src="'+$(this).attr("data-feedback-image")+'" '+e+" ></img>";i=i+"<div>"+("checkbox"===o.qType?"<span>"+$(this).parent().attr("data-label")+"</span> ":"")+$(this).attr("data-feedback")+t+"</div>"}),$("#sim-question .modal-footer .feedback p").html(i),$("#sim-question .modal-footer").show()}}},{key:"onHide",value:function(e){this.isShowing=!1,this.mainLab.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("popupClosed",{bubbles:!0,detail:{question:this.questionID}}))}}]),e}()},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MainLab=void 0;var a,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),n=i(5),o=i(4);t.MainLab=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),void 0===t){this.currentPhaseNum=1,this.totalPhases=0,this.phases=[],this.progress=1,this.progressMoveAmount=0,this.helpShowing=!1,this.labelsOn=!1,this.stepXml="",this.helpEnabled=null,this.isScreenReader=!1,this.keyboardUser=!1,this.userValues={},this.deferredArray=[],this.notesNeedSaved=!1,this.dataNeedSaved=!1,this.submitButton=$("#sim-submit-btn"),this.exitButton=$("#back-btn"),this.btnHelp=$(".sim-help-btn"),this.alertDialog=$("#sim-alert"),this.calloutDialog=$("#call-out"),this.labDataDialog=$("#sim-data"),this.incorrectPhaseAlertDialog=$("#sim-incorrect-phase"),this.incorrectAlertDialog=$("#sim-incorrect-alert-dialog"),this.ariaAlert=$("#sim-aria-live"),this.ariaDialogInterval=null,this.nextPhaseBtn=$(".next-phase-btn"),this.prevPhaseBtn=$(".prev-phase-btn"),this.modalHidden=!1,this.whatLabPath=document.location.href,this.whatLab="",this.currentSection="",this.activeObject=null,this.thisLab=null,this.previousState=[],this.previousFocusObj=null,this.loading=!0;for(var i=this.whatLabPath.split("/"),s=i.length;s>=0;s-=1)"sim-lab"!==i[s]&&"sim-lab-testing"!==i[s]||(this.whatLab=i[s-2]+"-"+i[s-1]);this.isMobile=this.isThisMobile(),this.isTestServer=this.isFromTestServer(),this.shiftKeyUsed=!1,window.mainLab=this,a=this,this.lmsIntegrationMode=!1,this.justCompleted=!1}}return s(e,[{key:"init",value:function(){a.getUserValues(),!0===a.lmsIntegrationMode&&a.STW.mode===a.STW.MODE_PREVIEW&&(a.userValues={}),a.setupAccessibilityDialog(),void 0!==a.userValues.progress?$("#menu-lab").addClass("current"):($("#menu-introduction").addClass("current"),$("#introduction").show());var e=new $.Deferred,t=setInterval(function(){null!==a.thisLab&&(e.resolve(),clearInterval(t))},100);a.deferredArray.push(e);var i=new $.Deferred;$.ajax({dataType:"html",url:a.whatLabPath+"/lab-data.html",success:function(e){$("#sim-data .modal-body").html($(e).filter("#lab-data-page")),$(".introduction-content div:eq(0)").html($(e).filter("#introduction-page")),a.initIntroduction(),a.stepXml=$(e).filter("#steps-xml").html(),$("#sim-title, head title").text($(a.stepXml).find("lab").attr("title")),$("#sim-title, head title").text($(a.stepXml).find("lab").attr("title"))},complete:function(){i.resolve()}}),a.deferredArray.push(i),$.when.apply($,a.deferredArray).done(function(){$("#lab-phases").contents().find(".sim-background").attr("aria-hidden","true"),a.deferredArray=[],$("#lab-phases").contents().find(".svg").each(function(){a.getSvg($(this))}),$.when.apply($,a.deferredArray).done(function(){$("#lab-phases").contents().find(".sim-object, .drop-target,  .sim-btn").each(function(){$(this).hasClass("sim-btn")?($(this).attr("focusable",!0),$(this).attr("aria-disabled",!1),$(this).attr("tabindex","0")):($(this).attr("focusable",!1),$(this).attr("aria-disabled",!0))}),$(".graphing-phase",$("#lab-phases").contents()).append($("#graph-phase")),$(".results-phase",$("#lab-phases").contents()).append($("#results-phase")),a.phases.push(null),a.thisLab.initLabSimulation(),a.popupQuestion=new n.PopupQuestion(a),a.popupMatchingQuestion=new o.PopupMatchingQuestion(a),a.totalPhases=a.phases.length-1,a.getUserProgress(),a.phases[1].setOutlineLinkActive(!0),void 0===a.thisLab.labData&&$(".sim-data-btn").remove(),$("#sim-loader-wait").hide(),$("#lab-phases").show(),!0===a.lmsIntegrationMode&&(a.STW.mode===a.STW.MODE_POST_TEST?(a.submitButton.hide(),a.gotoPhase(a.phases.length)):a.STW.mode===a.STW.MODE_PREVIEW&&(a.submitButton.hide(),a.showInfoAlert("Preview Mode.  Use Ctrl+Alt+k to skip ahead phases.")))})}),a.nextPhaseBtn.click(function(){$(this).hasClass("inactive")||(a.phases[a.currentPhaseNum].isCompleted?(a.gotoPhase(Number(a.currentPhaseNum)+1),a.setAriaAlertText("Moved to Phase "+a.currentPhaseNum)):a.phases[a.currentPhaseNum].checkIfPhaseCorrect())}),a.prevPhaseBtn.click(function(){$(this).is(".objectBlock")?a.showIncorrectAlert("You cannot go to a previous phase when an object is selected.",a.activeObject.obj):$(this).is(".inactive, .timerblock")||(a.gotoPhase(Number(a.currentPhaseNum)-1),a.setAriaAlertText("Moved to Phase "+a.currentPhaseNum))}),this.ariaAlert.find(".close").click(function(){a.hideAriaAlert()}),$("#sim-question .modal-footer #btn-continue").click(function(){$("#sim-question").modal("hide")}),$("div.modal").on("show.bs.modal",function(){!1===$(this).is("#sim-data")&&$("#sim-header, .sim-holder, .sim-rht-col").attr("aria-hidden","true")}),$("div.modal").on("hide.bs.modal",function(){!1===$(this).is("#sim-data")&&$("#sim-header, .sim-holder, .sim-rht-col").removeAttr("aria-hidden")}),$("#sim-notes").on("show.bs.modal",function(){$(".sim-notes-btn").hasClass("disable")?$(this).modal("hide"):(void 0!==a.getNotes()?$("#sim-notes .modal-text-input").html(a.getNotes()):$("#sim-notes .modal-text-input").html(""),a.previousFocusObj=$(".sim-notes-btn"))}),$("#sim-notes").on("hide.bs.modal",function(){a.setAriaAlertText("My Notes Dialog Closed"),a.setNotes($("#sim-notes .modal-text-input").html())}),$("#sim-notes").on("shown.bs.modal",function(e){a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("notesShown",{bubbles:!0,detail:{}})),$(this).find(".close").focus()}),$("#sim-data").draggable({handle:"div.modal-header, div.drag-indicator",stop:function(){$("#sim-data").offset().top<-15?$("#sim-data .drag-indicator").show():$("#sim-data .drag-indicator").hide()}}),a.disableLabDataDrag=function(e){$("#sim-data").draggable({disabled:e}),e?$("#sim-data .modal-header").css("cursor","default"):$("#sim-data .modal-header").css("cursor","-webkit-grab")},$("#sim-data").on("show.bs.modal",function(e){$(".sim-data-btn").hasClass("disable")?$(this).modal("hide"):(a.thisLab.labData.onShow(e),a.previousFocusObj=$(".sim-data-btn"))}),$("#sim-data").on("shown.bs.modal",function(e){setTimeout(function(){$(this).find(".close").focus()}.bind(this),500),$(".modal-backdrop",this).css("opacity",0),a.thisLab.labData.onShown(e),$("#sim-data").offset().top<-15?$("#sim-data .drag-indicator").show():$("#sim-data .drag-indicator").hide()}),$("#sim-data").on("hide.bs.modal",function(e){a.setAriaAlertText("Lab Data Dialog Closed"),a.thisLab.labData.onHide(e)}),$("#sim-alert, #sim-incorrect-alert-dialog,#sim-info-alert-dialog").on("shown.bs.modal",function(){$(this).find(".close").focus(),$(".modal-backdrop",this).css("opacity",0)}),this.incorrectAlertDialog.find(".close").click(function(e){$("#sim-incorrect-alert-dialog").modal("hide")}),$("#sim-reset").on("show.bs.modal",function(e){a.currentPhaseNum===a.totalPhases?($(this).find("#p1").hide(),$(this).find("#alert-yes-phase").hide(),$(this).find("#alert-yes-start").text("Reset Entire Laboratory Simulation"),$(this).find("#p2").html('Selecting "<strong>Reset Entire Laboratory Simulation</strong>" will reset all progress and take you back to the beginning of the lab exercise.'),$(this).find("#question").hide()):($(this).find("#p1").show(),$(this).find("#alert-yes-phase").show(),$(this).find("#alert-yes-start").html("Entire Laboratory Simulation"),$(this).find("#p2").html('Selecting "<strong>Entire Laboratory Simulation</strong>" will reset all progress and take you back to the beginning of the lab exercise.'),$(this).find("#question").show())}),$("#sim-reset").on("shown.bs.modal",function(){a.currentPhaseNum===a.totalPhases?$(this).find("#alert-yes-start").focus():$(this).find("#alert-yes-phase").focus(),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("resetShown",{bubbles:!0,detail:{}}))}),$(".modal").on("hidden.bs.modal",function(e){a.modalHidden=!0,null!==a.previousFocusObj?a.previousFocusObj.focus():a.thisLab.currentPhase.phaseDiv.find('[tabindex="0"]:first').focus(),a.previousFocusObj=null,"sim-notes"===$(this).attr("id")?a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("notesClosed",{bubbles:!0,detail:{}})):"sim-reset"===$(this).attr("id")&&a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("resetClosed",{bubbles:!0,detail:{}}))}),$('[data-toggle="modal"]').on("focus",function(e){a.modalHidden&&(a.thisLab.currentPhase.phaseDiv.find('[tabindex="0"]:first').focus(),a.modalHidden=!1)}),$("#alert-yes-start").click(function(){a.resetLab(1),$("#sim-reset").modal("hide")}),$("#sim-reset #alert-yes-phase").click(function(){$("#sim-reset").modal("hide"),a.resetCurrentPhase()}),$("#sim-incorrect-phase #alert-yes-phase").click(function(){$("#sim-incorrect-phase").modal("hide"),a.resetCurrentPhase()}),$("#sim-incorrect-phase").on("shown.bs.modal",function(){$("#sim-incorrect-phase #alert-yes-phase").focus()}),$("#alert-cancel").click(function(){$("#sim-reset").modal("hide")}),$("#sim-outline").on("show.bs.modal",function(e){$(".sim-outline-btn").hasClass("disable")?$(this).modal("hide"):a.previousFocusObj=$(".sim-outline-btn")}),$("#sim-outline").on("hide.bs.modal",function(e){a.setAriaAlertText("Methods Dialog Closed"),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("methodsClosed",{bubbles:!0,detail:{}}))}),$("#sim-outline").on("shown.bs.modal",function(e){$(this).find(".close").focus(),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("methodsShown",{bubbles:!0,detail:{}}))}),$("#sim-reset").on("show.bs.modal",function(){$(".sim-reset-btn").hasClass("disable")?$(this).modal("hide"):a.previousFocusObj=$(".sim-restart-btn")}),$("#sim-question").on("shown.bs.modal",function(){$(this).find("input").first().focus()}),$("#sim-question").on("hidden.bs.modal",function(e){a.popupQuestion.onHide(e)}),$("#call-out").on("shown.bs.modal",function(){$(this).find(".close").focus()}),$("#sim-confirm-dialog").on("shown.bs.modal",function(){$(this).find("button:first-of-type").focus()}),$("#sim-accessible-dialog").on("hide.bs.modal",function(e){a.userValues.settings=new Object({screenreader:0}),a.userValues.settings.screenreader=a.isScreenReader=$("#use-screen-reader").is(":checked"),a.updateUserValues(),a.setAriaAlertText("Accessibility Preferences / Help Dialog Closed"),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("accessibleClosed",{bubbles:!0,detail:{}}))}),$("#sim-accessible-dialog").on("shown.bs.modal",function(e){a.previousFocusObj=$("#sim-accessible-btn"),$(this).find(".close").focus(),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("accessibleShown",{bubbles:!0,detail:{}}))}),a.isMobile&&(document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),$(document).on("touchend",function(e){}),$(".inputs, .results-phase, #introduction").on("touchmove",function(e){e.stopPropagation()}),$(".sim-steps").on("touchmove",function(e){e.stopPropagation()})),a.btnHelp.on("click",function(e){e.preventDefault(),a.labelsOn?(a.showLabels(!0),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("helpShown",{bubbles:!0,detail:{}}))):(a.showLabels(!1),a.thisLab.currentPhase.phaseDiv.get(0).dispatchEvent(new CustomEvent("helpClosed",{bubbles:!0,detail:{}})),a.setAriaAlertText("Labels have been turned off"))}),$("ul.sim-navbar").delegate("a","keydown",function(e){var t=$(this);switch(e.which){case 37:0!==t.parent().prev().length?t.parent().prev().find("> a").click():$("ul.sim-navbar").find("li:last > a").click();break;case 39:0!==t.parent().next().length?t.parent().next().find("> a").click():$("ul.sim-navbar").find("li:first > a").click()}}),a.exitButton.click(function(e){e.preventDefault(),!0===a.lmsIntegrationMode&&a.STW.triggerAction(a.STW.ACTION_CANCEL)}),a.submitButton.click(function(e){e.preventDefault(),!0===a.lmsIntegrationMode&&a.STW.mode===a.STW.MODE_TEST&&void 0===a.userValues.completed&&a.showConfirmAlert("You have not finished this lab.  By submitting, you will no longer be able to make any further progress.  Are you sure you want to submit?",null,function(e){if(!0===e){var t=new Date;a.userValues.completed=t.toLocaleDateString("en-us")+" "+t.toLocaleTimeString("en-us"),a.justCompleted=!0,a.STW.triggerAction(a.STW.ACTION_SUBMIT)}})})}},{key:"useKeyboard",value:function(e){e?($("#lab-phases").contents().find("body").addClass("keyboard"),$("#lab-phases").contents().find("body").removeClass("no-keyboard"),$("body").addClass("keyboard"),$("body").removeClass("no-keyboard")):($("#lab-phases").contents().find("body").removeClass("keyboard"),$("#lab-phases").contents().find("body").addClass("no-keyboard"),$("body").removeClass("keyboard"),$("body").addClass("no-keyboard")),this.keyboardUser=e}},{key:"resetCurrentPhase",value:function(){a.phases[a.currentPhaseNum].reset(),void 0!==a.thisLab.labData&&a.thisLab.labData.reset(a.currentPhaseNum,!0),a.gotoPhase(a.currentPhaseNum),a.setAriaAlertText("The simulation has been reset to phase "+a.currentPhaseNum)}},{key:"resetLab",value:function(e){var t=a.progress;t>a.totalPhases&&(t=a.totalPhases),a.progress=e;var i=a.currentPhaseNum;a.userValues.progress=a.progress;for(var s=a.progress;s<=t;s++)a.currentPhaseNum=s,a.phases[s].reset(),void 0!==a.thisLab.labData&&a.thisLab.labData.reset(s);a.updateUserValues(),a.currentPhaseNum=i,a.gotoPhase(a.progress),a.setAriaAlertText("The simulation has been reset to phase "+e)}},{key:"gotoPhase",value:function(e){$("#sim-outline").modal("hide"),a.phases[a.currentPhaseNum].hide(),e>a.totalPhases&&(e=a.totalPhases),a.currentPhaseNum=e,e>1?a.prevPhaseBtn.removeClass("inactive").attr("aria-disabled","false").attr("tabindex","0"):a.prevPhaseBtn.addClass("inactive").attr("aria-disabled","true").removeAttr("tabindex"),a.phases[a.currentPhaseNum].show(),a.showLabels(!1),this.updateProgressBar(),a.updateUserValues(),$(".sim-steps").height("calc(100% - "+($("#phase-header").outerHeight()+$(".sim-rht-col-ctrl").outerHeight())+"px)")}},{key:"getUserProgress",value:function(){$("#progress-total").html(a.totalPhases);var e=$(".progress-bar-fill").width();a.progressMoveAmount=Number(e)/a.totalPhases;for(var t=1;t<=a.totalPhases;t++)a.currentPhaseNum=t,a.thisLab.currentPhase=a.phases[t],a.phases[t].initObjects();if(void 0!==a.userValues.progress){a.progress=a.userValues.progress;for(var i=1;i<a.progress;i++)a.currentPhaseNum=i,a.thisLab.currentPhase=a.phases[i],a.phases[i].complete(),a.phases[i].hide();void 0!==a.thisLab.labData&&a.thisLab.labData.complete(),a.gotoPhase(a.progress),a.currentSection="lab",$("#introduction").hide(),$("#menu-introduction").removeClass("current"),$("#menu-introduction").attr("aria-expanded","false"),$("#menu-introduction").attr("aria-selected","false"),$("#menu-introduction").attr("tabindex","-1"),$("#menu-lab").addClass("current"),$("#menu-lab").attr("aria-expanded","true"),$("#menu-lab").attr("aria-selected","true"),$("#menu-lab").attr("tabindex","0")}else a.gotoPhase(1),$("#lab").hide();void 0===a.userValues.phaseResets&&(a.userValues.phaseResets=[])}},{key:"hideAriaAlert",value:function(){a.ariaAlert.css("opacity","0")}},{key:"setAriaAlertText",value:function(e,t){void 0!==t&&t?(a.ariaAlert.find("#aria-alert-text").html(e),setTimeout(function(){a.ariaAlert.find("#aria-alert-text").html("")},5e3),console.log("Aria Assertive Alert: "+e)):(a.ariaAlert.find("#aria-text").html(e),setTimeout(function(){a.ariaAlert.find("#aria-text").html("")},2e3),console.log("Aria PoliteAlert: "+e))}},{key:"bugFixSetAriaAlertText",value:function(e,t){void 0!==t&&t?(a.ariaAlert.find("#aria-text").html(""),setTimeout(function(){a.ariaAlert.find("#aria-alert-text").html(e),setTimeout(function(){a.ariaAlert.find("#aria-alert-text").html("")},5e3),console.log("bfAria Assertive Alert: "+e)},50)):(a.ariaAlert.find("#aria-text").html(""),setTimeout(function(){a.ariaAlert.find("#aria-text").html(e),setTimeout(function(){a.ariaAlert.find("#aria-text").html("")},2e3),console.log("bfAria Polite Alert: "+e)},50))}},{key:"showCallout",value:function(e,t){a.calloutDialog.find(".modal-dialog").css("max-width","665px"),a.calloutDialog.find(".modal-body").load(t),a.calloutDialog.find(".modal-title").text(e),a.calloutDialog.modal("show")}},{key:"showCalloutImage",value:function(e,t,i,s){a.calloutDialog.find(".modal-dialog").css("max-width",i),a.calloutDialog.find(".modal-body").html('<img class="image" src="'+t+'" style="width:100%;height:auto" /> <br />'),a.calloutDialog.find(".modal-title").text(e),a.calloutDialog.find(".modal-body img").attr("aria-label","Magnified view of "+s),a.calloutDialog.modal("show")}},{key:"showGraphCallout",value:function(){a.calloutDialog.modal("show")}},{key:"hideLabData",value:function(){a.labDataDialog.modal("hide")}},{key:"showIncorrectPhaseAlert",value:function(e){a.incorrectPhaseAlertDialog.find("#incorrect-modal-text").html(e),a.incorrectPhaseAlertDialog.modal("show")}},{key:"setHelpEnabled",value:function(e){a.helpEnabled!==e&&(e?(a.btnHelp.removeClass("disable"),a.btnHelp.attr("tabindex","0"),a.btnHelp.attr("focusable","true"),a.btnHelp.removeAttr("aria-disabled")):(a.btnHelp.addClass("disable"),a.btnHelp.attr("tabindex","-1"),a.btnHelp.attr("focusable","false"),a.btnHelp.attr("aria-disabled","true"))),a.helpEnabled=e}},{key:"setButtonEnabled",value:function(e,t){e&&$(t).hasClass("disable")&&($(t).removeClass("disable"),$(t).attr("tabindex","0"),$(t).attr("focusable","true"),$(t).removeAttr("aria-disabled")),e||$(t).hasClass("disable")||($(t).addClass("disable"),$(t).removeAttr("tabindex"),$(t).attr("focusable","false"),$(t).attr("aria-disabled","true"))}},{key:"showIncorrectAlert",value:function(e,t){$("#sim-incorrect-alert-dialog #incorrect-alert-text").html(e),a.previousFocusObj=t,null===t&&(t=$(this.thisLab.currentPhase.phaseDiv)),t.parent().is("svg")&&(t=$(t.parent()),a.previousFocusObj=t);var i=t.height(),s=t.width(),n=t.css("top"),o=t.css("left");"auto"!==n&&"auto"!==o||(n=t.offset().top+73+"px",o=t.offset().left+"px");var r=$("#sim-incorrect-alert-dialog .modal-dialog"),l=$("#sim-incorrect-alert-dialog .modal-content");r.css("left",0),r.css("top",0),$("#sim-incorrect-alert-dialog").modal("show");var u=l.height()/2,c=l.width()/2,d=Number(n.substring(0,n.length-2))+i/2-u,h=Number(o.substring(0,o.length-2))+s/2-c;h=h<15?15:h,d=d<0?0:d,r.css("top",d),r.css("left",h)}},{key:"showInfoAlert",value:function(e,t){$("#sim-info-alert-dialog #info-alert-text").html(e),null!==t&&void 0!==t||(t=$("#lab-phases")),t.parent().is("svg")&&(t=$(t.parent()));var i=t.height(),a=t.width(),s=t.css("top"),n=t.css("left");"auto"!==s&&"auto"!==n||(s=t.offset().top+73+"px",n=t.offset().left+"px");var o=$("#sim-info-alert-dialog .modal-dialog"),r=$("#sim-info-alert-dialog .modal-content");o.css("left",0),o.css("top",0),$("#sim-info-alert-dialog").modal("show");var l=r.height()/2,u=r.width()/2,c=Number(s.substring(0,s.length-2))+i/2-l,d=Number(n.substring(0,n.length-2))+a/2-u;d=d<15?15:d,c=c<0?0:c,o.css("top",c),o.css("left",d)}},{key:"showConfirmAlert",value:function(e,t,i){$("#sim-confirm-dialog #confirm-alert-text").html(e),$("#sim-confirm-dialog .buttons button").off("click"),$("#sim-confirm-dialog .buttons button").click(function(){$("#sim-confirm-dialog").modal("hide"),i("true"===$(this).val())}),null===t&&(t=$(this.thisLab.currentPhase.phaseDiv)),t.parent().is("svg")&&(t=$(t.parent()));var a=t.height(),s=t.width(),n=t.css("top"),o=t.css("left");"auto"!==n&&"auto"!==o||(n=t.offset().top+73+"px",o=t.offset().left+"px");var r=$("#sim-confirm-dialog .modal-dialog"),l=$("#sim-confirm-dialog .modal-content");r.css("left",0),r.css("top",0),$("#sim-confirm-dialog").modal("show");var u=l.height()/2,c=l.width()/2,d=Number(n.substring(0,n.length-2))+a/2-u,h=Number(o.substring(0,o.length-2))+s/2-c;h=h<15?15:h,d=d<0?0:d,r.css("top",d),r.css("left",h)}},{key:"showLabels",value:function(e){if(e){a.btnHelp.addClass("clicked"),a.btnHelp.text("Hide Labels");var t,i=$("#lab-phases").contents().find("#labels"),s=a.thisLab.currentPhase.phaseDiv,n=$("#lab-phases").contents().find("#phase-holder");i.children().each(function(){if((t=s.find('[data-id="'+$(this).attr("for")+'"]')).is(":visible")){var e=Number(t.css("top").substring(0,t.css("top").length-2)),i=Number(t.css("left").substring(0,t.css("left").length-2)),a=e/Number(n.height())*100,o=i/Number(n.width())*100;$(this).css("top",a+Number($(this).attr("data-top-offset"))+"%"),$(this).css("left",o+Number($(this).attr("data-left-offset"))+"%"),$(this).show()}else $(this).hide()}),i.show(),a.setAriaAlertText("Labels for the objects in the simulation have been turned on")}else a.btnHelp.removeClass("clicked"),a.btnHelp.text("Show Labels"),$("#lab-phases").contents().find("#labels").hide();a.labelsOn=!e}},{key:"updateProgressBar",value:function(){$("#progress-current").html(a.currentPhaseNum),a.currentPhaseNum===a.totalPhases?($("#progress-current").hide(),$("#progress-total").css("background-color","#ff8c29"),$(".progress-bar-fill").width("100%")):($(".progress-bar-fill").width((a.currentPhaseNum-1)*a.progressMoveAmount),$("#progress-total").css("background-color","#ccc"),$("#progress-current").show(),$("#progress-current").css("left",(a.currentPhaseNum-1)*a.progressMoveAmount))}},{key:"doKeydown",value:function(e){var t=e.keyCode?e.keyCode:e.which;if(13===t||32===t)$(e.target)[0].hasAttribute("contenteditable")||$(e.target).is("input:text")||$(e.target).is("button")||$(e.target).is("input:checkbox")||$(e.target).is("textarea")||$(e.target).is("select")||$(e.target).is("a")||$(e.target).is("video")?32===t&&$(e.target).is("a")&&$(e.target)[0].click():(e.preventDefault(),e.stopPropagation(),$(e.target).trigger("click"));else if(9===t)e.shiftKey?a.shiftKeyUsed=!0:a.shiftKeyUsed=!1,a.keyboardUser||"none"!==$("#sim-data").css("display")||(a.useKeyboard(!0),void 0===a.userValues.settings&&$("#sim-accessible-dialog").modal("show"));else if(e.ctrlKey&&e.altKey)switch(t){case 72:$(".sim-help-btn").hasClass("disable")||($(".sim-help-btn").hasClass("clicked")?(a.showLabels(!1),a.setAriaAlertText("Labels have been turned off")):a.showLabels(!0));break;case 76:void 0===$(".sim-data-btn")||$(".sim-data-btn").hasClass("disable")||$("#sim-data").modal("show");break;case 78:$(".sim-notes-btn").hasClass("disable")||$("#sim-notes").modal("show");break;case 82:$(".sim-restart-btn").hasClass("disable")||$("#sim-reset").modal("show");break;case 77:$(".sim-outline-btn").hasClass("disable")||$("#sim-outline").modal("show");break;case 71:$(".next-phase-btn").trigger("click");break;case 27:$(".close:visible").trigger("click");break;case 75:(a.isTestServer||!0===a.lmsIntegrationMode&&a.STW.mode===a.STW.MODE_PREVIEW)&&Number(a.currentPhaseNum)<a.totalPhases&&a.gotoPhase(Number(a.currentPhaseNum)+1);break;case 68:a.isTestServer&&a.getThisLab().labData.obj.find(".data-entry *").removeAttr("disabled");break;case 83:$(".sim-steps").focus();case 81:a.isTestServer&&(a.popupQuestion.showQuestion=function(e){});break;case 80:$(".prev-phase-btn").trigger("click");break;case 83:$("#lab-phases").contents().find('[tabindex="0"]:visible:first').focus();break;case 65:break;case 88:if(a.isTestServer&&null!==a.activeObject){var i=Number(a.activeObject.obj.css("left").replace("px",""));i=Number(Math.round(100*i/$("#lab-phases").width()*20)/20).toFixed(2)+"%";var s=Number(a.activeObject.obj.css("top").replace("px",""));s=Number(Math.round(100*s/$("#lab-phases").height()*20)/20).toFixed(2)+"%"}break;case 90:$("#lab-phases").contents().find('[data-id="zoom-in"]:visible').length>0?$("#lab-phases").contents().find('[data-id="zoom-in"]:visible').trigger("click"):$("#lab-phases").contents().find('[data-id="zoom-out"]:visible').length>0&&$("#lab-phases").contents().find('[data-id="zoom-out"]:visible').trigger("click")}else 27===t&&$(".close:visible").trigger("click")}},{key:"focusIn",value:function(e){var t=$(".notabout:visible")[0];void 0!==t&&0===$(t).find($(e.target)).length?(e.stopImmediatePropagation(),this.shiftKeyUsed?$(t).find(":tabbable:visible").last().focus():$(t).find(":tabbable:visible").first().focus(),a.shiftKeyUsed=!1):void 0===t&&null!==a.activeObject&&0===$("#phase-"+a.currentPhaseNum,$("#lab-phases").contents()).find($(e.target)).length&&(e.stopImmediatePropagation(),this.shiftKeyUsed?$("#lab-phases").contents().find('[tabindex="0"]:visible:last').focus():$("#lab-phases").contents().find('[tabindex="0"]:visible:first').focus())}},{key:"restorePreviousState",value:function(){$.each(this.previousState,function(e,t){"true"===t.enabled?(t.obj.attr("tabindex","0"),t.obj.attr("focusable","true"),t.obj.removeAttr("aria-disabled"),t.obj.removeClass("disabled")):(t.obj.removeAttr("tabindex"),t.obj.attr("focusable","false"),t.obj.attr("aria-disabled",!0),t.obj.addClass("disabled"))})}},{key:"getSvg",value:function(e){var t=new $.Deferred,i=this.whatLabPath+"/"+e.attr("src");e.removeAttr("src"),$.ajax({url:i,cache:!0,success:function(t){var i=$("<div/>"),a=$(t).find("svg"),s=e.prop("attributes");$.each(s,function(){i.attr(this.name,this.value)}),a.attr("role","presentation"),a.attr("focusable","false"),$(">title",a).text(e.attr("aria-label")).attr("id","title-"+e.attr("id")),a.removeAttr("id"),i.append(a),e.replaceWith(i)},complete:function(){t.resolve()}}),a.deferredArray.push(t)}},{key:"getUserValues",value:function(){if(!1===a.lmsIntegrationMode)try{void 0!==window.localStorage["mghSmartLabs_"+this.whatLab]&&(a.userValues=JSON.parse(window.localStorage["mghSmartLabs_"+this.whatLab]))}catch(e){console.log(e)}}},{key:"updateUserValues",value:function(){!1===a.lmsIntegrationMode?window.localStorage.setItem("mghSmartLabs_"+this.whatLab,JSON.stringify(a.userValues)):a.STW.mode===a.STW.MODE_TEST&&void 0===a.userValues.completed?a.STW.triggerAction(a.STW.ACTION_SAVE):a.STW.mode===a.STW.MODE_TEST&&!0===a.justCompleted&&(a.STW.triggerAction(a.STW.ACTION_SUBMIT),a.justCompleted=!1)}},{key:"setNotes",value:function(e){a.userValues.notes=e.replace(new RegExp("\n","g"),"<br />"),a.updateUserValues()}},{key:"getNotes",value:function(){return a.userValues.notes}},{key:"copyPhase",value:function(e,t){var i=$("#phase-"+e,$("#lab-phases").contents()).clone();i.attr("id","phase-"+t),$("#phase-holder",$("#lab-phases").contents()).append(i),i.find("#phase-objects").children().each(function(){a.renameId($(this),e,t)})}},{key:"renameId",value:function(e,t,i){void 0!==e.attr("id")&&e.attr("id",e.attr("id").replace("-"+t,"-"+i)),e.is("div")?e.children().each(function(){a.renameId($(this),t,i)}):e.is("svg")&&a.copySvg(e,t,i)}},{key:"copySvg",value:function(e,t,i){e.find("clipPath").each(function(){var s=$(this),n=s.attr("id");a.renameId(s,t,i);var o=s.attr("id");a.renameId(s.find("rect"),t,i),e.find("style").text(e.find("style").text().replace(n,o));var r=new RegExp("\\.([^\\{]*)\\{\\s*clip-path").exec(e.find("style").text())[1];e.find("style").text(e.find("style").text().replace("."+r,"."+o)),e.find("."+r).addClass(o).removeClass(r)});var s=e.find("defs filter#blur");s.length>0&&(s.attr("id","blur-"+i),e.find("#images").attr("filter","url(#blur-"+i+")"))}},{key:"setThisLab",value:function(e){a.thisLab=e}},{key:"getThisLab",value:function(){return a.thisLab}},{key:"setupAccessibilityDialog",value:function(){-1!==window.navigator.userAgent.indexOf("Mac")?$(".key-combo").text("Ctrl + Opt"):$(".key-combo").text("Ctrl + Alt"),void 0!==a.userValues.settings&&($("#use-screen-reader").prop("checked",a.userValues.settings.screenreader),a.isScreenReader=$("#use-screen-reader").is(":checked")),$("#use-screen-reader").change(function(e){void 0===a.userValues.settings&&(a.userValues.settings=new Object({screenreader:0})),a.userValues.settings.screenreader=a.isScreenReader=$("#use-screen-reader").is(":checked"),a.updateUserValues()})}},{key:"initIntroduction",value:function(){$("#introduction-page").attr("tabindex",-1),$("#introduction-page ul.accordian li").attr("tabindex","0"),$("#introduction-page ul.accordian li").click(function(){$("#introduction-page ul.accordian li").not($(this)).removeClass("show"),$(this).toggleClass("show")}),$(".zoom-img").wrap($("<div/>").css("position","relative").addClass("zoom-img-wrapper").attr("tabindex",0)),$(".zoom-img-wrapper").click(function(e){e.preventDefault();var t="";void 0!==$("img",$(this)).attr("aria-label")?t=$("img",$(this)).attr("aria-label"):void 0!==$("img",$(this)).attr("aria-describedby")&&(t=$("#"+$("img",$(this)).attr("aria-describedby"))),a.showCalloutImage($("img",$(this)).attr("data-title"),$("img",$(this)).attr("src"),$("img",$(this)).attr("data-max-width"),t)})}},{key:"gotoSection",value:function(e){a.currentSection=e,$(".section").hide(),$(".menu").removeClass("current"),$(".menu").attr("aria-expanded","false"),$(".menu").attr("aria-selected","false"),$(".menu").attr("tabindex","-1"),$("#menu-"+e).addClass("current"),$("#menu-"+e).attr("aria-expanded","true"),$("#menu-"+e).attr("aria-selected","true"),$("#menu-"+e).attr("tabindex","0"),$("#"+e).show(),$("#menu-"+e).focus(),"lab"===e?(void 0===a.userValues.progress&&(a.userValues.progress=1,a.updateUserValues()),$("#introduction video").length>0&&$("#introduction video").each(function(){$(this).get(0).pause()})):void 0!==a.thisLab.timer&&a.thisLab.timer.obj.get(0).dispatchEvent(new CustomEvent("gotoIntro",{bubbles:!0,detail:{}}))}},{key:"isThisMobile",value:function(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>1}},{key:"isFromTestServer",value:function(){return-1!==location.hostname.indexOf("localhost")||-1!==location.hostname.indexOf("ccidev")}}]),e}()},,function(e,t){
/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011â€“2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
!function(e){function t(e,t){if(!(e.originalEvent.touches.length>1)){e.preventDefault();var i=e.originalEvent.changedTouches[0],a=document.createEvent("MouseEvents");a.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(a)}}if(e.support.touch="ontouchend"in document,e.support.touch){var i,a=e.ui.mouse.prototype,s=a._mouseInit,n=a._mouseDestroy;a._touchStart=function(e){!i&&this._mouseCapture(e.originalEvent.changedTouches[0])&&(i=!0,this._touchMoved=!1,t(e,"mouseover"),t(e,"mousemove"),t(e,"mousedown"))},a._touchMove=function(e){i&&(this._touchMoved=!0,t(e,"mousemove"))},a._touchEnd=function(e){i&&(t(e,"mouseup"),t(e,"mouseout"),this._touchMoved||t(e,"click"),i=!1)},a._mouseInit=function(){var t=this;t.element.bind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),s.call(t)},a._mouseDestroy=function(){var t=this;t.element.unbind({touchstart:e.proxy(t,"_touchStart"),touchmove:e.proxy(t,"_touchMove"),touchend:e.proxy(t,"_touchEnd")}),n.call(t)}}}(jQuery)},function(e,t,i){"use strict";i(8);var a=i(6);function s(){console.log("handle resize");var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;$(".section").height(e-73),$("#sim-data").is(":visible")&&$("#sim-data").height($("#sim-data").find(".modal-content").outerHeight())}$(document).ready(function(){if($(window).bind("resize",s),s(),mainLab=new a.MainLab,mainLab.isMobile&&$("html").css({position:"fixed"}),$("#lab-phases").attr("src","lab-phases.html"),mainLab.lmsIntegrationMode=function(){try{return window.self!==window.top}catch(e){return!0}}(),mainLab.lmsIntegrationMode?(r.init(),mainLab.STW=r):(r.mode="OFF",mainLab.STW=r),mainLab.init(),$(".sim-navbar-mobile").hide(),$("#sim-mobile-nav-btn").click(function(){$(".sim-navbar-mobile").slideToggle("slow")}),$(".menu").click(function(e){e.preventDefault(),mainLab.gotoSection($(this).attr("id").substring($(this).attr("id").lastIndexOf("-")+1))}),$(".continue-btn").click(function(){mainLab.gotoSection($(this).attr("data"))}),$(document).click(function(e){var t;void 0!==(t=$(".notabout:visible")[0])&&"sim-question"!==$(t).attr("id")&&mainLab.isScreenReader&&0===$(t).find(":focus").length&&$(t).modal("hide")}),$(document).keydown(function(e){if(9===(e.keyCode?e.keyCode:e.which))if("menu-introduction"===e.target.id&&mainLab.isScreenReader)e.shiftKey||(e.preventDefault(),$("#introduction-page").focus());else{if("menu-introduction"===e.target.id&&!mainLab.isScreenReader)return;if("menu-lab"===e.target.id)if(mainLab.isScreenReader){if(e.shiftKey)return;e.preventDefault(),console.log("force to instructions"),$("#instructions-wrapper").focus()}else{if(e.shiftKey)return;e.preventDefault(),0!==(t=$("#lab-phases").contents().find('[tabindex="0"]:visible:first')).length?(t.focus(),mainLab.shiftKeyUsed=!1):$(".sim-outline-btn").focus()}else if($(e.target).hasClass("sim-steps")||"instructions-wrapper"===e.target.id){e.preventDefault(),0!==(t=$("#lab-phases").contents().find('[tabindex="0"]:visible:first')).length?e.shiftKey?$("#menu-lab").focus():(t.focus(),mainLab.shiftKeyUsed=!1):e.shiftKey?$("#menu-lab").focus():$(".sim-outline-btn").focus()}else if($(e.target).hasClass("sim-outline-btn")){var t;if(e.shiftKey)0===(t=$("#lab-phases").contents().find('[tabindex="0"]:visible:first')).length&&(e.preventDefault(),$("#menu-lab").focus());mainLab.shiftKeyUsed=!1}else mainLab.doKeydown(e)}else mainLab.doKeydown(e)}),$(document).focusin(function(e){mainLab.keyboardUser&&(null!==mainLab.activeObject||Number($(".notabout:visible").length)>0)&&mainLab.focusIn(e)}),$('[data-toggle="tooltip"]').tooltip({trigger:"hover"}),mainLab.isMobile){var e=0;document.addEventListener("touchstart",function(t){$(t.target).is("#sim-outline *")&&(e=t.touches[0].clientY)}),document.addEventListener("touchmove",function(t){t.preventDefault(),$(t.target).is("#sim-outline *")&&($("#sim-outline").scrollTop($("#sim-outline").scrollTop()+-1*(t.changedTouches[0].clientY-e)),e=t.changedTouches[0].clientY)},{passive:!1}),$(document).on("touchend",function(){e=0})}}),-1!==window.location.href.indexOf("mheducation")&&-1===window.location.href.indexOf("qa.")&&(console.log=function(e){}),"function"!=typeof CustomEvent&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}e.prototype=window.Event.prototype,window.CustomEvent=e}();var n=document.domain;if(n.indexOf(".com")>-1&&n.indexOf(".")>-1){var o=n.split(".");n=o[o.length-2]+"."+o[o.length-1]}var r={API_VERSION:"1.0.0",MODE_PREVIEW:"preview",MODE_TEST:"test",MODE_PREGRADE:"sample",MODE_POST_TEST:"review",MODE_DESIGN:"design",ACTION_SAVE:"save",ACTION_CANCEL:"cancel",ACTION_SUBMIT:"submit",ACTION_SAVE_EXIT:"saveAndExit",debug:!0,id:"ext_012345678_1",qid:"",instanceid:"",mode:"",state:"",toolStateJSON:{},getParentVarByID:function(e){var t="";try{parent.getVarByID?t=parent.getVarByID(e):this.log("STW.getVarByID function is not present in parent")}catch(e){this.log("STW.getVarByID function exception "+e)}return t},getParentVarByName:function(e){var t="";try{parent.getVarByName?t=parent.getVarByID(e):this.log("STW.getParentVarByName function is not present in parent")}catch(e){this.log("STW.getParentVarByName function exception "+e)}return t},log:function(e){this.debug&&(console&&console.log?console.log(e):window.status=e)},error:function(e){this.debug&&(console&&console.log?console.log(e):window.alert(e))},init:function(){if(this.log("STW.init()"),this.id=window.name,""!=this.id){var e=this.id.split("_");this.qid=e[0]+"_"+e[1],this.mode=this.getParentVarByID(this.id+"_mode"),this.state=this.getParentVarByID(this.id+"_state");try{setState(this.state)}catch(e){this.error("Error in calling external setState method"+e)}}this.log("  id         : "+this.id),this.log("  mode       : "+this.mode),this.log("  state      : "+this.state)},resize:function(e,t){this.log("STW.resize("+e+", "+t+")");try{parent.resizeIFrame?result=parent.resizeIFrame(this.id,e,t):this.log("STW.resize() - no resizeIFrame in parent")}catch(e){this.log("Exception occure in STW.resize function"+e)}},param:function(e){return this.log("STW.param("+e+")"),this.getParentVarByName(e)},instance:function(){return this.log("STW.instance()"),this.instanceid},triggerAction:function(e){this.log("STW.triggerAction(action)");try{getState();parent.triggerAction?parent.triggerAction(e):this.log("STW.triggerAction(action) - no triggerAction in parent")}catch(e){this.log("Exception occure in STW.triggerAction function "+e)}}}}]);
//# sourceMappingURL=main.js.map